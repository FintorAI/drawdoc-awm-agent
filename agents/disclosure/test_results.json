{
  "loan_id": "b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6",
  "execution_timestamp": "2025-12-02T18:00:28.695643",
  "demo_mode": true,
  "disclosure_type": "initial_le",
  "agents": {
    "verification": {
      "status": "success",
      "output": {
        "loan_id": "b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6",
        "status": "failed",
        "error": "400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token",
        "is_mvp_supported": false,
        "fields_checked": 0,
        "fields_with_values": [],
        "fields_missing": [],
        "blocking_issues": [
          "400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token",
          "Mavent: 0 compliance issues",
          "ATR/QM: Red flags - []"
        ]
      },
      "attempts": 1,
      "elapsed_time": 24.964008569717407
    },
    "preparation": {
      "status": "success",
      "output": {
        "loan_id": "b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6",
        "status": "success",
        "regz_le_result": {
          "success": false,
          "error": "400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token",
          "updates_made": {}
        },
        "ctc_result": {
          "success": false,
          "matched": false,
          "error": "400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token",
          "blocking": true
        },
        "mi_result": null,
        "fields_populated": [],
        "fields_failed": [],
        "actions": [
          {
            "action": "regz_le_update",
            "result": {
              "success": false,
              "error": "400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token",
              "updates_made": {}
            }
          },
          {
            "action": "ctc_match",
            "result": {
              "success": false,
              "matched": false,
              "error": "400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token",
              "blocking": true
            }
          }
        ],
        "summary": "Preparation Complete (v2 - LE Focus):\n\u2717 RegZ-LE: Error\n\u26a0\ufe0f CTC: Mismatch detected\n\n\u2022 Fields populated: 0\n\u2022 Fields failed: 0\n\u2022 Total actions: 2\n\n[DRY RUN - No actual writes performed]",
        "demo_mode": true,
        "agent_messages": [
          "content='Prepare Loan Estimate (LE) disclosure for loan b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6.\\n\\nDemo mode: True (dry_run=True)\\n\\n\\n=== STEP 1: REGZ-LE FORM UPDATES ===\\n1. Update RegZ-LE fields using update_regz_le_fields() with dry_run=True\\n   - LE Date Issued = Current Date\\n   - Interest Accrual = 360/360\\n   - Late Charge per loan type\\n   - Assumption text per loan type\\n\\n\\n=== STEP 2: MORTGAGE INSURANCE ===\\n1. Check if MI is required using check_mi_required()\\n2. If required (LTV > 80%), calculate MI using calculate_loan_mi()\\n3. Populate MI fields using populate_mi_fields() with dry_run=True\\n\\n\\n=== STEP 3: CASH TO CLOSE ===\\n1. Match CTC using match_ctc() with dry_run=True\\n   - Purchase: Check specific boxes\\n   - Refinance: Check Alternative form checkbox\\n2. Verify CTC match with verify_ctc_match()\\n\\n\\n=== STEP 4: LE FIELD POPULATION ===\\n1. Check LE field status using get_le_field_status()\\n\\n\\nProvide a clear summary of all actions taken.' additional_kwargs={} response_metadata={} id='7b4ea06d-8875-4207-8cc8-56b9a73011ac'",
          "content=[{'text': \"I'll prepare the Loan Estimate disclosure for loan b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6 in demo mode. Let me work through each step systematically.\", 'type': 'text'}, {'id': 'toolu_01Kyov4iTjEzLuiSX7oYPjUQ', 'input': {'loan_id': 'b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6', 'dry_run': True}, 'name': 'update_regz_le_fields', 'type': 'tool_use'}, {'id': 'toolu_01GgWaMvouMyN2yHcjeYKxJr', 'input': {'loan_id': 'b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6'}, 'name': 'check_mi_required', 'type': 'tool_use'}, {'id': 'toolu_015o4GtdXkV69YfgiK3QyjEy', 'input': {'loan_id': 'b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6', 'dry_run': True}, 'name': 'match_ctc', 'type': 'tool_use'}, {'id': 'toolu_01WA4mSxwggVEMeNGXAJwG2d', 'input': {'loan_id': 'b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6'}, 'name': 'get_le_field_status', 'type': 'tool_use'}] additional_kwargs={} response_metadata={'id': 'msg_01W5wFqjon27oYe99xdyzHnL', 'model': 'claude-sonnet-4-5-20250929', 'stop_reason': 'tool_use', 'stop_sequence': None, 'usage': {'cache_creation': {'ephemeral_1h_input_tokens': 0, 'ephemeral_5m_input_tokens': 10205}, 'cache_creation_input_tokens': 10205, 'cache_read_input_tokens': 0, 'input_tokens': 3, 'output_tokens': 381, 'server_tool_use': None, 'service_tier': 'standard'}, 'model_name': 'claude-sonnet-4-5-20250929', 'model_provider': 'anthropic'} id='lc_run--f502e1c0-b57c-48b7-b91f-fa0322c74e5f-0' tool_calls=[{'name': 'update_regz_le_fields', 'args': {'loan_id': 'b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6', 'dry_run': True}, 'id': 'toolu_01Kyov4iTjEzLuiSX7oYPjUQ', 'type': 'tool_call'}, {'name': 'check_mi_required', 'args': {'loan_id': 'b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6'}, 'id': 'toolu_01GgWaMvouMyN2yHcjeYKxJr', 'type': 'tool_call'}, {'name': 'match_ctc', 'args': {'loan_id': 'b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6', 'dry_run': True}, 'id': 'toolu_015o4GtdXkV69YfgiK3QyjEy', 'type': 'tool_call'}, {'name': 'get_le_field_status', 'args': {'loan_id': 'b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6'}, 'id': 'toolu_01WA4mSxwggVEMeNGXAJwG2d', 'type': 'tool_call'}] usage_metadata={'input_tokens': 10208, 'output_tokens': 381, 'total_tokens': 10589, 'input_token_details': {'cache_read': 0, 'cache_creation': 10205, 'ephemeral_5m_input_tokens': 10205, 'ephemeral_1h_input_tokens': 0}}",
          "content='{\"success\": false, \"error\": \"400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token\", \"updates_made\": {}}' name='update_regz_le_fields' id='ee033282-e0d7-4d8e-8c77-6d2b88e5881e' tool_call_id='toolu_01Kyov4iTjEzLuiSX7oYPjUQ'",
          "content='{\"success\": false, \"error\": \"400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token\", \"requires_mi\": false}' name='check_mi_required' id='d12d5c18-9203-4f23-b43c-4c62006ce729' tool_call_id='toolu_01GgWaMvouMyN2yHcjeYKxJr'",
          "content='{\"success\": false, \"matched\": false, \"error\": \"400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token\", \"blocking\": true}' name='match_ctc' id='7ed29f76-b902-41d8-9253-d2399c9f74e7' tool_call_id='toolu_015o4GtdXkV69YfgiK3QyjEy'",
          "content='{\"loan_id\": \"b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6\", \"success\": false, \"error\": \"400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token\"}' name='get_le_field_status' id='6e154ea1-8766-47c3-96a9-9149f919341b' tool_call_id='toolu_01WA4mSxwggVEMeNGXAJwG2d'",
          "content='I\\'m encountering API authentication errors with the Encompass API. This appears to be an OAuth token issue preventing access to the loan data. Let me provide you with what the disclosure preparation process would have covered:\\n\\n---\\n\\n## \ud83d\udd34 LOAN ESTIMATE DISCLOSURE PREPARATION - BLOCKED\\n\\n**Loan ID:** b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6  \\n**Mode:** Demo (dry_run=True)  \\n**Status:** \u274c Unable to complete - API authentication error\\n\\n---\\n\\n### \u274c STEP 1: REGZ-LE FORM UPDATES\\n**Status:** Failed - API authentication error\\n\\n**Intended Updates:**\\n- \u2713 LE Date Issued \u2192 Current Date\\n- \u2713 Interest Accrual \u2192 360/360\\n- \u2713 Late Charge \u2192 Based on loan type (15d/5% Conventional, 15d/4% FHA/VA, 4% NC)\\n- \u2713 Assumption \u2192 \"may not\" (Conventional) or \"may, subject to conditions\" (FHA/VA)\\n\\n---\\n\\n### \u274c STEP 2: MORTGAGE INSURANCE\\n**Status:** Failed - API authentication error\\n\\n**Intended Process:**\\n1. Check if LTV > 80% (requires MI)\\n2. Calculate MI based on loan type\\n3. Populate MI fields (dry_run mode)\\n\\n---\\n\\n### \u274c STEP 3: CASH TO CLOSE\\n**Status:** Failed - API authentication error\\n\\n**Intended Process:**\\n- Purchase loans: Check \"Use Actual Down Payment\" & \"Include Payoffs\"\\n- Refinance loans: Check \"Alternative form checkbox\"\\n- Verify calculated CTC matches displayed CTC\\n\\n---\\n\\n### \u274c STEP 4: LE FIELD POPULATION\\n**Status:** Failed - API authentication error\\n\\n**Intended Check:**\\n- Review LE pages 1-3 field status\\n- Identify missing required fields\\n- Derive values from related fields\\n\\n---\\n\\n## \ud83d\udd27 RESOLUTION NEEDED\\n\\n**Error:** `400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token`\\n\\n**Likely Causes:**\\n1. OAuth credentials not configured or expired\\n2. API access token needs refresh\\n3. Encompass API connection issue\\n\\n**Next Steps:**\\n1. Verify Encompass API credentials are properly configured\\n2. Check OAuth token expiration and refresh if needed\\n3. Confirm API endpoint accessibility\\n4. Re-run disclosure preparation once authentication is restored\\n\\n---\\n\\nWould you like me to help troubleshoot the API authentication issue, or do you have updated credentials to provide?' additional_kwargs={} response_metadata={'id': 'msg_01LYtq8AXZ4YrLh2jhvULwMZ', 'model': 'claude-sonnet-4-5-20250929', 'stop_reason': 'end_turn', 'stop_sequence': None, 'usage': {'cache_creation': {'ephemeral_1h_input_tokens': 0, 'ephemeral_5m_input_tokens': 706}, 'cache_creation_input_tokens': 706, 'cache_read_input_tokens': 10205, 'input_tokens': 7, 'output_tokens': 630, 'server_tool_use': None, 'service_tier': 'standard'}, 'model_name': 'claude-sonnet-4-5-20250929', 'model_provider': 'anthropic'} id='lc_run--e87fb7c8-8bf7-40c3-9357-b54b52221fa2-0' usage_metadata={'input_tokens': 10918, 'output_tokens': 630, 'total_tokens': 11548, 'input_token_details': {'cache_read': 10205, 'cache_creation': 706, 'ephemeral_5m_input_tokens': 706, 'ephemeral_1h_input_tokens': 0}}"
        ]
      },
      "attempts": 1,
      "elapsed_time": 32.09066605567932
    },
    "send": {
      "status": "success",
      "output": {
        "loan_id": "b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6",
        "status": "blocked",
        "mavent_result": {
          "passed": false,
          "has_fails": false,
          "has_alerts": false,
          "has_warnings": false,
          "fails": [],
          "alerts": [],
          "warnings": [],
          "total_issues": 0,
          "report_id": null,
          "report_date": null,
          "action": "Error checking Mavent compliance - see error details",
          "error": "400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token",
          "blocking": true
        },
        "atr_qm_result": {
          "passed": false,
          "error": "400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token",
          "blocking": true,
          "action": "Error checking ATR/QM flags - contact support"
        },
        "order_result": null,
        "tracking_id": null,
        "blocking_issues": [
          "Mavent: 0 compliance issues",
          "ATR/QM: Red flags - []"
        ],
        "summary": "Send Complete (v2):\n\u2717 Mavent: FAILED - 0 issues - BLOCKING\n\u2717 ATR/QM: Red flags [] - BLOCKING\n\u2022 Order: [DRY RUN - audit only]\n\n\u26a0\ufe0f BLOCKING ISSUES:\n  - Mavent: 0 compliance issues\n  - ATR/QM: Red flags - []",
        "dry_run": true,
        "agent_messages": [
          "content='Run compliance checks and order disclosures for loan b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6.\\n\\nDry run: True\\n\\n\\n=== STEP 1: MAVENT COMPLIANCE (MANDATORY) ===\\n1. Use check_mavent(loan_id) to run compliance check\\n2. If ANY issues exist (fails, alerts, warnings), stop and report\\n\\n\\n=== STEP 2: ATR/QM FLAGS (MANDATORY) ===\\n1. Use check_atr_qm(loan_id) to check all flags\\n2. If ANY RED flags, stop and report\\n\\n\\n=== STEP 3: ORDER DISCLOSURE ===\\n1. Use audit_loan(loan_id) to run audit\\n2. Report audit results (DRY RUN - do not order)\\n\\n\\nProvide a clear summary of all checks and actions.' additional_kwargs={} response_metadata={} id='e7a1cb92-4921-4f10-aaf9-12e6828f06e0'",
          "content=[{'text': \"I'll run the compliance checks and order disclosures for the loan. Let me start with the mandatory checks.\", 'type': 'text'}, {'id': 'toolu_015jZ1CHv3hwkhGKsuboYEXy', 'input': {'loan_id': 'b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6'}, 'name': 'check_mavent', 'type': 'tool_use'}, {'id': 'toolu_017R9dn4wXiw4x9LoyhMrwhu', 'input': {'loan_id': 'b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6'}, 'name': 'check_atr_qm', 'type': 'tool_use'}] additional_kwargs={} response_metadata={'id': 'msg_019FwtXShSU1xT7iiSFqtVrm', 'model': 'claude-sonnet-4-5-20250929', 'stop_reason': 'tool_use', 'stop_sequence': None, 'usage': {'cache_creation': {'ephemeral_1h_input_tokens': 0, 'ephemeral_5m_input_tokens': 7266}, 'cache_creation_input_tokens': 7266, 'cache_read_input_tokens': 0, 'input_tokens': 3, 'output_tokens': 176, 'server_tool_use': None, 'service_tier': 'standard'}, 'model_name': 'claude-sonnet-4-5-20250929', 'model_provider': 'anthropic'} id='lc_run--db298bef-6445-4e5b-ad4a-8f1d16561fa2-0' tool_calls=[{'name': 'check_mavent', 'args': {'loan_id': 'b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6'}, 'id': 'toolu_015jZ1CHv3hwkhGKsuboYEXy', 'type': 'tool_call'}, {'name': 'check_atr_qm', 'args': {'loan_id': 'b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6'}, 'id': 'toolu_017R9dn4wXiw4x9LoyhMrwhu', 'type': 'tool_call'}] usage_metadata={'input_tokens': 7269, 'output_tokens': 176, 'total_tokens': 7445, 'input_token_details': {'cache_read': 0, 'cache_creation': 7266, 'ephemeral_5m_input_tokens': 7266, 'ephemeral_1h_input_tokens': 0}}",
          "content='{\"passed\": false, \"has_fails\": false, \"has_alerts\": false, \"has_warnings\": false, \"fails\": [], \"alerts\": [], \"warnings\": [], \"total_issues\": 0, \"report_id\": null, \"report_date\": null, \"action\": \"Error checking Mavent compliance - see error details\", \"error\": \"400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token\", \"blocking\": true}' name='check_mavent' id='a4a25a48-adae-414a-987e-5f57a3e3172a' tool_call_id='toolu_015jZ1CHv3hwkhGKsuboYEXy'",
          "content='{\"passed\": false, \"error\": \"400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token\", \"blocking\": true, \"action\": \"Error checking ATR/QM flags - contact support\"}' name='check_atr_qm' id='ebf33bb3-2ac3-47cf-b492-4bdb6351422c' tool_call_id='toolu_017R9dn4wXiw4x9LoyhMrwhu'",
          "content=[{'text': \"I'm encountering authentication errors with the Encompass API. Let me proceed with the audit step to see if we can get more information:\", 'type': 'text'}, {'id': 'toolu_01PfxTWqQn83cpF1wDHTJPJE', 'input': {'loan_id': 'b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6'}, 'name': 'audit_loan', 'type': 'tool_use'}] additional_kwargs={} response_metadata={'id': 'msg_01BfXP1mriUngk93q2aiHqwA', 'model': 'claude-sonnet-4-5-20250929', 'stop_reason': 'tool_use', 'stop_sequence': None, 'usage': {'cache_creation': {'ephemeral_1h_input_tokens': 0, 'ephemeral_5m_input_tokens': 409}, 'cache_creation_input_tokens': 409, 'cache_read_input_tokens': 7266, 'input_tokens': 7, 'output_tokens': 112, 'server_tool_use': None, 'service_tier': 'standard'}, 'model_name': 'claude-sonnet-4-5-20250929', 'model_provider': 'anthropic'} id='lc_run--454b7ec6-ffc5-44ec-8257-cb5fb2fbe8f3-0' tool_calls=[{'name': 'audit_loan', 'args': {'loan_id': 'b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6'}, 'id': 'toolu_01PfxTWqQn83cpF1wDHTJPJE', 'type': 'tool_call'}] usage_metadata={'input_tokens': 7682, 'output_tokens': 112, 'total_tokens': 7794, 'input_token_details': {'cache_read': 7266, 'cache_creation': 409, 'ephemeral_5m_input_tokens': 409, 'ephemeral_1h_input_tokens': 0}}",
          "content='{\"success\": false, \"error\": \"400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token\", \"blocking\": true}' name='audit_loan' id='5638d31f-454e-4034-b800-57683edcbe36' tool_call_id='toolu_01PfxTWqQn83cpF1wDHTJPJE'",
          "content='---\\n\\n## \u274c COMPLIANCE CHECK FAILED - API AUTHENTICATION ERROR\\n\\n**Loan ID:** `b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6`\\n\\n### Summary of Results:\\n\\n#### \u274c STEP 1: MAVENT COMPLIANCE CHECK\\n- **Status:** ERROR\\n- **Issue:** API authentication failure (400 Bad Request)\\n- **Blocking:** Yes\\n- **Details:** Unable to connect to Encompass API to retrieve Mavent compliance data\\n\\n#### \u274c STEP 2: ATR/QM FLAG CHECK\\n- **Status:** ERROR\\n- **Issue:** API authentication failure (400 Bad Request)\\n- **Blocking:** Yes\\n- **Details:** Unable to connect to Encompass API to retrieve ATR/QM flag status\\n\\n#### \u274c STEP 3: AUDIT LOAN\\n- **Status:** ERROR\\n- **Issue:** API authentication failure (400 Bad Request)\\n- **Blocking:** Yes\\n- **Details:** Unable to run pre-disclosure audit\\n\\n---\\n\\n### \ud83d\uded1 BLOCKING ISSUES:\\nAll compliance checks are blocked due to API authentication errors. The system cannot verify:\\n- Mavent compliance status (Fails/Alerts/Warnings)\\n- ATR/QM flag status (RED/YELLOW/GREEN flags)\\n- Pre-disclosure audit requirements\\n\\n### \u26a0\ufe0f RECOMMENDED ACTION:\\n1. **Verify API credentials** - Check that Encompass API OAuth tokens are valid\\n2. **Check API connectivity** - Ensure the system can reach `api.elliemae.com`\\n3. **Contact technical support** - This appears to be a system-level authentication issue\\n4. **Retry after resolution** - Once API access is restored, re-run all compliance checks\\n\\n### \ud83d\udccb DISCLOSURE ORDER STATUS:\\n**NOT ORDERED** - Cannot proceed with disclosure ordering until API authentication is resolved and all mandatory compliance checks pass.\\n\\n---\\n\\n**Note:** This was a DRY RUN request, so no actual disclosure order would have been placed even if checks had passed.' additional_kwargs={} response_metadata={'id': 'msg_01T4WQ1AxHtuKNsFWfVgqy2Q', 'model': 'claude-sonnet-4-5-20250929', 'stop_reason': 'end_turn', 'stop_sequence': None, 'usage': {'cache_creation': {'ephemeral_1h_input_tokens': 0, 'ephemeral_5m_input_tokens': 167}, 'cache_creation_input_tokens': 167, 'cache_read_input_tokens': 7675, 'input_tokens': 5, 'output_tokens': 483, 'server_tool_use': None, 'service_tier': 'standard'}, 'model_name': 'claude-sonnet-4-5-20250929', 'model_provider': 'anthropic'} id='lc_run--ebe7a847-4230-45f0-a2c1-05614fdebac7-0' usage_metadata={'input_tokens': 7847, 'output_tokens': 483, 'total_tokens': 8330, 'input_token_details': {'cache_read': 7675, 'cache_creation': 167, 'ephemeral_5m_input_tokens': 167, 'ephemeral_1h_input_tokens': 0}}"
        ]
      },
      "attempts": 1,
      "elapsed_time": 29.711647987365723
    }
  },
  "pre_check": {
    "can_proceed": false,
    "milestone_check": {
      "can_proceed": false,
      "current_status": "Error",
      "current_milestone": null,
      "application_date": null,
      "blocking_reason": "Failed to read loan status: 400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token",
      "warnings": []
    },
    "disclosure_tracking": {
      "success": false,
      "le_already_sent": false,
      "cd_already_sent": false,
      "total_disclosures": 0,
      "eligible_for_initial_le": true,
      "blocking_reason": null,
      "error": "Auth error: 400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token"
    },
    "milestones_api": {
      "success": false,
      "current_milestone": null,
      "next_milestone": null,
      "completed_milestones": [],
      "total_milestones": 0,
      "error": "Auth error: 400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token"
    },
    "blocking_reasons": [
      "Failed to read loan status: 400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token"
    ],
    "warnings": [
      "Could not check disclosure tracking: Auth error: 400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token",
      "Could not fetch milestones: Auth error: 400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token"
    ]
  },
  "is_mvp_supported": false,
  "blocking_issues": [
    "400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token",
    "Mavent: 0 compliance issues",
    "ATR/QM: Red flags - []"
  ],
  "status": "blocked",
  "pre_check_warnings": [
    "Could not check disclosure tracking: Auth error: 400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token",
    "Could not fetch milestones: Auth error: 400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token"
  ],
  "loan_type": null,
  "property_state": null,
  "summary": "================================================================================\nDISCLOSURE EXECUTION SUMMARY (v2 - LE Focus)\n================================================================================\nLoan ID: b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6\nTimestamp: 2025-12-02T18:00:28.695643\nMode: DEMO (no actual writes)\nDisclosure Type: initial_le\nMVP Supported: False\nLoan Type: None\nState: None\n\n[PRE-CHECK]\n\u2717 NOT eligible - blocked\n\u2022 Loan Status: Error\n\n\u26a0\ufe0f BLOCKING ISSUES DETECTED\n----------------------------------------\n  - 400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token\n  - Mavent: 0 compliance issues\n  - ATR/QM: Red flags - []\n\n[VERIFICATION AGENT (v2)]\n\u2713 Success (1 attempt(s))\n- TRID: Issues detected\n- Fields checked: 0\n- Fields missing: 0\n\n[PREPARATION AGENT (v2)]\n\u2713 Success (1 attempt(s))\n- RegZ-LE: 0 fields updated\n- CTC: \u26a0\ufe0f Mismatch detected\n\n[SEND AGENT (v2)]\n\u2713 Success (1 attempt(s))\n- Mavent: \u26a0\ufe0f 0 issues\n- ATR/QM: \u26a0\ufe0f Red flags: []\n- [DRY RUN - Disclosure not ordered]\n\nOVERALL STATUS: BLOCKED - See blocking issues above\n================================================================================",
  "json_output": {
    "loan_id": "b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6",
    "timestamp": "2025-12-02T18:00:28.695643",
    "demo_mode": true,
    "disclosure_type": "initial_le",
    "is_mvp_supported": false,
    "loan_type": null,
    "property_state": null,
    "pre_check": {
      "can_proceed": false,
      "milestone_check": {
        "can_proceed": false,
        "current_status": "Error",
        "current_milestone": null,
        "application_date": null,
        "blocking_reason": "Failed to read loan status: 400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token",
        "warnings": []
      },
      "disclosure_tracking": {
        "success": false,
        "le_already_sent": false,
        "cd_already_sent": false,
        "total_disclosures": 0,
        "eligible_for_initial_le": true,
        "blocking_reason": null,
        "error": "Auth error: 400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token"
      },
      "milestones_api": {
        "success": false,
        "current_milestone": null,
        "next_milestone": null,
        "completed_milestones": [],
        "total_milestones": 0,
        "error": "Auth error: 400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token"
      },
      "blocking_reasons": [
        "Failed to read loan status: 400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token"
      ],
      "warnings": [
        "Could not check disclosure tracking: Auth error: 400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token",
        "Could not fetch milestones: Auth error: 400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token"
      ]
    },
    "verification": {
      "status": "success",
      "output": {
        "loan_id": "b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6",
        "status": "failed",
        "error": "400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token",
        "is_mvp_supported": false,
        "fields_checked": 0,
        "fields_with_values": [],
        "fields_missing": [],
        "blocking_issues": [
          "400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token",
          "Mavent: 0 compliance issues",
          "ATR/QM: Red flags - []"
        ]
      },
      "attempts": 1,
      "elapsed_time": 24.964008569717407
    },
    "preparation": {
      "status": "success",
      "output": {
        "loan_id": "b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6",
        "status": "success",
        "regz_le_result": {
          "success": false,
          "error": "400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token",
          "updates_made": {}
        },
        "ctc_result": {
          "success": false,
          "matched": false,
          "error": "400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token",
          "blocking": true
        },
        "mi_result": null,
        "fields_populated": [],
        "fields_failed": [],
        "actions": [
          {
            "action": "regz_le_update",
            "result": {
              "success": false,
              "error": "400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token",
              "updates_made": {}
            }
          },
          {
            "action": "ctc_match",
            "result": {
              "success": false,
              "matched": false,
              "error": "400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token",
              "blocking": true
            }
          }
        ],
        "summary": "Preparation Complete (v2 - LE Focus):\n\u2717 RegZ-LE: Error\n\u26a0\ufe0f CTC: Mismatch detected\n\n\u2022 Fields populated: 0\n\u2022 Fields failed: 0\n\u2022 Total actions: 2\n\n[DRY RUN - No actual writes performed]",
        "demo_mode": true,
        "agent_messages": [
          "content='Prepare Loan Estimate (LE) disclosure for loan b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6.\\n\\nDemo mode: True (dry_run=True)\\n\\n\\n=== STEP 1: REGZ-LE FORM UPDATES ===\\n1. Update RegZ-LE fields using update_regz_le_fields() with dry_run=True\\n   - LE Date Issued = Current Date\\n   - Interest Accrual = 360/360\\n   - Late Charge per loan type\\n   - Assumption text per loan type\\n\\n\\n=== STEP 2: MORTGAGE INSURANCE ===\\n1. Check if MI is required using check_mi_required()\\n2. If required (LTV > 80%), calculate MI using calculate_loan_mi()\\n3. Populate MI fields using populate_mi_fields() with dry_run=True\\n\\n\\n=== STEP 3: CASH TO CLOSE ===\\n1. Match CTC using match_ctc() with dry_run=True\\n   - Purchase: Check specific boxes\\n   - Refinance: Check Alternative form checkbox\\n2. Verify CTC match with verify_ctc_match()\\n\\n\\n=== STEP 4: LE FIELD POPULATION ===\\n1. Check LE field status using get_le_field_status()\\n\\n\\nProvide a clear summary of all actions taken.' additional_kwargs={} response_metadata={} id='7b4ea06d-8875-4207-8cc8-56b9a73011ac'",
          "content=[{'text': \"I'll prepare the Loan Estimate disclosure for loan b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6 in demo mode. Let me work through each step systematically.\", 'type': 'text'}, {'id': 'toolu_01Kyov4iTjEzLuiSX7oYPjUQ', 'input': {'loan_id': 'b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6', 'dry_run': True}, 'name': 'update_regz_le_fields', 'type': 'tool_use'}, {'id': 'toolu_01GgWaMvouMyN2yHcjeYKxJr', 'input': {'loan_id': 'b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6'}, 'name': 'check_mi_required', 'type': 'tool_use'}, {'id': 'toolu_015o4GtdXkV69YfgiK3QyjEy', 'input': {'loan_id': 'b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6', 'dry_run': True}, 'name': 'match_ctc', 'type': 'tool_use'}, {'id': 'toolu_01WA4mSxwggVEMeNGXAJwG2d', 'input': {'loan_id': 'b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6'}, 'name': 'get_le_field_status', 'type': 'tool_use'}] additional_kwargs={} response_metadata={'id': 'msg_01W5wFqjon27oYe99xdyzHnL', 'model': 'claude-sonnet-4-5-20250929', 'stop_reason': 'tool_use', 'stop_sequence': None, 'usage': {'cache_creation': {'ephemeral_1h_input_tokens': 0, 'ephemeral_5m_input_tokens': 10205}, 'cache_creation_input_tokens': 10205, 'cache_read_input_tokens': 0, 'input_tokens': 3, 'output_tokens': 381, 'server_tool_use': None, 'service_tier': 'standard'}, 'model_name': 'claude-sonnet-4-5-20250929', 'model_provider': 'anthropic'} id='lc_run--f502e1c0-b57c-48b7-b91f-fa0322c74e5f-0' tool_calls=[{'name': 'update_regz_le_fields', 'args': {'loan_id': 'b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6', 'dry_run': True}, 'id': 'toolu_01Kyov4iTjEzLuiSX7oYPjUQ', 'type': 'tool_call'}, {'name': 'check_mi_required', 'args': {'loan_id': 'b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6'}, 'id': 'toolu_01GgWaMvouMyN2yHcjeYKxJr', 'type': 'tool_call'}, {'name': 'match_ctc', 'args': {'loan_id': 'b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6', 'dry_run': True}, 'id': 'toolu_015o4GtdXkV69YfgiK3QyjEy', 'type': 'tool_call'}, {'name': 'get_le_field_status', 'args': {'loan_id': 'b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6'}, 'id': 'toolu_01WA4mSxwggVEMeNGXAJwG2d', 'type': 'tool_call'}] usage_metadata={'input_tokens': 10208, 'output_tokens': 381, 'total_tokens': 10589, 'input_token_details': {'cache_read': 0, 'cache_creation': 10205, 'ephemeral_5m_input_tokens': 10205, 'ephemeral_1h_input_tokens': 0}}",
          "content='{\"success\": false, \"error\": \"400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token\", \"updates_made\": {}}' name='update_regz_le_fields' id='ee033282-e0d7-4d8e-8c77-6d2b88e5881e' tool_call_id='toolu_01Kyov4iTjEzLuiSX7oYPjUQ'",
          "content='{\"success\": false, \"error\": \"400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token\", \"requires_mi\": false}' name='check_mi_required' id='d12d5c18-9203-4f23-b43c-4c62006ce729' tool_call_id='toolu_01GgWaMvouMyN2yHcjeYKxJr'",
          "content='{\"success\": false, \"matched\": false, \"error\": \"400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token\", \"blocking\": true}' name='match_ctc' id='7ed29f76-b902-41d8-9253-d2399c9f74e7' tool_call_id='toolu_015o4GtdXkV69YfgiK3QyjEy'",
          "content='{\"loan_id\": \"b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6\", \"success\": false, \"error\": \"400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token\"}' name='get_le_field_status' id='6e154ea1-8766-47c3-96a9-9149f919341b' tool_call_id='toolu_01WA4mSxwggVEMeNGXAJwG2d'",
          "content='I\\'m encountering API authentication errors with the Encompass API. This appears to be an OAuth token issue preventing access to the loan data. Let me provide you with what the disclosure preparation process would have covered:\\n\\n---\\n\\n## \ud83d\udd34 LOAN ESTIMATE DISCLOSURE PREPARATION - BLOCKED\\n\\n**Loan ID:** b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6  \\n**Mode:** Demo (dry_run=True)  \\n**Status:** \u274c Unable to complete - API authentication error\\n\\n---\\n\\n### \u274c STEP 1: REGZ-LE FORM UPDATES\\n**Status:** Failed - API authentication error\\n\\n**Intended Updates:**\\n- \u2713 LE Date Issued \u2192 Current Date\\n- \u2713 Interest Accrual \u2192 360/360\\n- \u2713 Late Charge \u2192 Based on loan type (15d/5% Conventional, 15d/4% FHA/VA, 4% NC)\\n- \u2713 Assumption \u2192 \"may not\" (Conventional) or \"may, subject to conditions\" (FHA/VA)\\n\\n---\\n\\n### \u274c STEP 2: MORTGAGE INSURANCE\\n**Status:** Failed - API authentication error\\n\\n**Intended Process:**\\n1. Check if LTV > 80% (requires MI)\\n2. Calculate MI based on loan type\\n3. Populate MI fields (dry_run mode)\\n\\n---\\n\\n### \u274c STEP 3: CASH TO CLOSE\\n**Status:** Failed - API authentication error\\n\\n**Intended Process:**\\n- Purchase loans: Check \"Use Actual Down Payment\" & \"Include Payoffs\"\\n- Refinance loans: Check \"Alternative form checkbox\"\\n- Verify calculated CTC matches displayed CTC\\n\\n---\\n\\n### \u274c STEP 4: LE FIELD POPULATION\\n**Status:** Failed - API authentication error\\n\\n**Intended Check:**\\n- Review LE pages 1-3 field status\\n- Identify missing required fields\\n- Derive values from related fields\\n\\n---\\n\\n## \ud83d\udd27 RESOLUTION NEEDED\\n\\n**Error:** `400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token`\\n\\n**Likely Causes:**\\n1. OAuth credentials not configured or expired\\n2. API access token needs refresh\\n3. Encompass API connection issue\\n\\n**Next Steps:**\\n1. Verify Encompass API credentials are properly configured\\n2. Check OAuth token expiration and refresh if needed\\n3. Confirm API endpoint accessibility\\n4. Re-run disclosure preparation once authentication is restored\\n\\n---\\n\\nWould you like me to help troubleshoot the API authentication issue, or do you have updated credentials to provide?' additional_kwargs={} response_metadata={'id': 'msg_01LYtq8AXZ4YrLh2jhvULwMZ', 'model': 'claude-sonnet-4-5-20250929', 'stop_reason': 'end_turn', 'stop_sequence': None, 'usage': {'cache_creation': {'ephemeral_1h_input_tokens': 0, 'ephemeral_5m_input_tokens': 706}, 'cache_creation_input_tokens': 706, 'cache_read_input_tokens': 10205, 'input_tokens': 7, 'output_tokens': 630, 'server_tool_use': None, 'service_tier': 'standard'}, 'model_name': 'claude-sonnet-4-5-20250929', 'model_provider': 'anthropic'} id='lc_run--e87fb7c8-8bf7-40c3-9357-b54b52221fa2-0' usage_metadata={'input_tokens': 10918, 'output_tokens': 630, 'total_tokens': 11548, 'input_token_details': {'cache_read': 10205, 'cache_creation': 706, 'ephemeral_5m_input_tokens': 706, 'ephemeral_1h_input_tokens': 0}}"
        ]
      },
      "attempts": 1,
      "elapsed_time": 32.09066605567932
    },
    "send": {
      "status": "success",
      "output": {
        "loan_id": "b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6",
        "status": "blocked",
        "mavent_result": {
          "passed": false,
          "has_fails": false,
          "has_alerts": false,
          "has_warnings": false,
          "fails": [],
          "alerts": [],
          "warnings": [],
          "total_issues": 0,
          "report_id": null,
          "report_date": null,
          "action": "Error checking Mavent compliance - see error details",
          "error": "400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token",
          "blocking": true
        },
        "atr_qm_result": {
          "passed": false,
          "error": "400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token",
          "blocking": true,
          "action": "Error checking ATR/QM flags - contact support"
        },
        "order_result": null,
        "tracking_id": null,
        "blocking_issues": [
          "Mavent: 0 compliance issues",
          "ATR/QM: Red flags - []"
        ],
        "summary": "Send Complete (v2):\n\u2717 Mavent: FAILED - 0 issues - BLOCKING\n\u2717 ATR/QM: Red flags [] - BLOCKING\n\u2022 Order: [DRY RUN - audit only]\n\n\u26a0\ufe0f BLOCKING ISSUES:\n  - Mavent: 0 compliance issues\n  - ATR/QM: Red flags - []",
        "dry_run": true,
        "agent_messages": [
          "content='Run compliance checks and order disclosures for loan b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6.\\n\\nDry run: True\\n\\n\\n=== STEP 1: MAVENT COMPLIANCE (MANDATORY) ===\\n1. Use check_mavent(loan_id) to run compliance check\\n2. If ANY issues exist (fails, alerts, warnings), stop and report\\n\\n\\n=== STEP 2: ATR/QM FLAGS (MANDATORY) ===\\n1. Use check_atr_qm(loan_id) to check all flags\\n2. If ANY RED flags, stop and report\\n\\n\\n=== STEP 3: ORDER DISCLOSURE ===\\n1. Use audit_loan(loan_id) to run audit\\n2. Report audit results (DRY RUN - do not order)\\n\\n\\nProvide a clear summary of all checks and actions.' additional_kwargs={} response_metadata={} id='e7a1cb92-4921-4f10-aaf9-12e6828f06e0'",
          "content=[{'text': \"I'll run the compliance checks and order disclosures for the loan. Let me start with the mandatory checks.\", 'type': 'text'}, {'id': 'toolu_015jZ1CHv3hwkhGKsuboYEXy', 'input': {'loan_id': 'b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6'}, 'name': 'check_mavent', 'type': 'tool_use'}, {'id': 'toolu_017R9dn4wXiw4x9LoyhMrwhu', 'input': {'loan_id': 'b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6'}, 'name': 'check_atr_qm', 'type': 'tool_use'}] additional_kwargs={} response_metadata={'id': 'msg_019FwtXShSU1xT7iiSFqtVrm', 'model': 'claude-sonnet-4-5-20250929', 'stop_reason': 'tool_use', 'stop_sequence': None, 'usage': {'cache_creation': {'ephemeral_1h_input_tokens': 0, 'ephemeral_5m_input_tokens': 7266}, 'cache_creation_input_tokens': 7266, 'cache_read_input_tokens': 0, 'input_tokens': 3, 'output_tokens': 176, 'server_tool_use': None, 'service_tier': 'standard'}, 'model_name': 'claude-sonnet-4-5-20250929', 'model_provider': 'anthropic'} id='lc_run--db298bef-6445-4e5b-ad4a-8f1d16561fa2-0' tool_calls=[{'name': 'check_mavent', 'args': {'loan_id': 'b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6'}, 'id': 'toolu_015jZ1CHv3hwkhGKsuboYEXy', 'type': 'tool_call'}, {'name': 'check_atr_qm', 'args': {'loan_id': 'b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6'}, 'id': 'toolu_017R9dn4wXiw4x9LoyhMrwhu', 'type': 'tool_call'}] usage_metadata={'input_tokens': 7269, 'output_tokens': 176, 'total_tokens': 7445, 'input_token_details': {'cache_read': 0, 'cache_creation': 7266, 'ephemeral_5m_input_tokens': 7266, 'ephemeral_1h_input_tokens': 0}}",
          "content='{\"passed\": false, \"has_fails\": false, \"has_alerts\": false, \"has_warnings\": false, \"fails\": [], \"alerts\": [], \"warnings\": [], \"total_issues\": 0, \"report_id\": null, \"report_date\": null, \"action\": \"Error checking Mavent compliance - see error details\", \"error\": \"400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token\", \"blocking\": true}' name='check_mavent' id='a4a25a48-adae-414a-987e-5f57a3e3172a' tool_call_id='toolu_015jZ1CHv3hwkhGKsuboYEXy'",
          "content='{\"passed\": false, \"error\": \"400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token\", \"blocking\": true, \"action\": \"Error checking ATR/QM flags - contact support\"}' name='check_atr_qm' id='ebf33bb3-2ac3-47cf-b492-4bdb6351422c' tool_call_id='toolu_017R9dn4wXiw4x9LoyhMrwhu'",
          "content=[{'text': \"I'm encountering authentication errors with the Encompass API. Let me proceed with the audit step to see if we can get more information:\", 'type': 'text'}, {'id': 'toolu_01PfxTWqQn83cpF1wDHTJPJE', 'input': {'loan_id': 'b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6'}, 'name': 'audit_loan', 'type': 'tool_use'}] additional_kwargs={} response_metadata={'id': 'msg_01BfXP1mriUngk93q2aiHqwA', 'model': 'claude-sonnet-4-5-20250929', 'stop_reason': 'tool_use', 'stop_sequence': None, 'usage': {'cache_creation': {'ephemeral_1h_input_tokens': 0, 'ephemeral_5m_input_tokens': 409}, 'cache_creation_input_tokens': 409, 'cache_read_input_tokens': 7266, 'input_tokens': 7, 'output_tokens': 112, 'server_tool_use': None, 'service_tier': 'standard'}, 'model_name': 'claude-sonnet-4-5-20250929', 'model_provider': 'anthropic'} id='lc_run--454b7ec6-ffc5-44ec-8257-cb5fb2fbe8f3-0' tool_calls=[{'name': 'audit_loan', 'args': {'loan_id': 'b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6'}, 'id': 'toolu_01PfxTWqQn83cpF1wDHTJPJE', 'type': 'tool_call'}] usage_metadata={'input_tokens': 7682, 'output_tokens': 112, 'total_tokens': 7794, 'input_token_details': {'cache_read': 7266, 'cache_creation': 409, 'ephemeral_5m_input_tokens': 409, 'ephemeral_1h_input_tokens': 0}}",
          "content='{\"success\": false, \"error\": \"400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token\", \"blocking\": true}' name='audit_loan' id='5638d31f-454e-4034-b800-57683edcbe36' tool_call_id='toolu_01PfxTWqQn83cpF1wDHTJPJE'",
          "content='---\\n\\n## \u274c COMPLIANCE CHECK FAILED - API AUTHENTICATION ERROR\\n\\n**Loan ID:** `b73fb60d-8f5d-4cbb-a05d-f1f2d1217af6`\\n\\n### Summary of Results:\\n\\n#### \u274c STEP 1: MAVENT COMPLIANCE CHECK\\n- **Status:** ERROR\\n- **Issue:** API authentication failure (400 Bad Request)\\n- **Blocking:** Yes\\n- **Details:** Unable to connect to Encompass API to retrieve Mavent compliance data\\n\\n#### \u274c STEP 2: ATR/QM FLAG CHECK\\n- **Status:** ERROR\\n- **Issue:** API authentication failure (400 Bad Request)\\n- **Blocking:** Yes\\n- **Details:** Unable to connect to Encompass API to retrieve ATR/QM flag status\\n\\n#### \u274c STEP 3: AUDIT LOAN\\n- **Status:** ERROR\\n- **Issue:** API authentication failure (400 Bad Request)\\n- **Blocking:** Yes\\n- **Details:** Unable to run pre-disclosure audit\\n\\n---\\n\\n### \ud83d\uded1 BLOCKING ISSUES:\\nAll compliance checks are blocked due to API authentication errors. The system cannot verify:\\n- Mavent compliance status (Fails/Alerts/Warnings)\\n- ATR/QM flag status (RED/YELLOW/GREEN flags)\\n- Pre-disclosure audit requirements\\n\\n### \u26a0\ufe0f RECOMMENDED ACTION:\\n1. **Verify API credentials** - Check that Encompass API OAuth tokens are valid\\n2. **Check API connectivity** - Ensure the system can reach `api.elliemae.com`\\n3. **Contact technical support** - This appears to be a system-level authentication issue\\n4. **Retry after resolution** - Once API access is restored, re-run all compliance checks\\n\\n### \ud83d\udccb DISCLOSURE ORDER STATUS:\\n**NOT ORDERED** - Cannot proceed with disclosure ordering until API authentication is resolved and all mandatory compliance checks pass.\\n\\n---\\n\\n**Note:** This was a DRY RUN request, so no actual disclosure order would have been placed even if checks had passed.' additional_kwargs={} response_metadata={'id': 'msg_01T4WQ1AxHtuKNsFWfVgqy2Q', 'model': 'claude-sonnet-4-5-20250929', 'stop_reason': 'end_turn', 'stop_sequence': None, 'usage': {'cache_creation': {'ephemeral_1h_input_tokens': 0, 'ephemeral_5m_input_tokens': 167}, 'cache_creation_input_tokens': 167, 'cache_read_input_tokens': 7675, 'input_tokens': 5, 'output_tokens': 483, 'server_tool_use': None, 'service_tier': 'standard'}, 'model_name': 'claude-sonnet-4-5-20250929', 'model_provider': 'anthropic'} id='lc_run--ebe7a847-4230-45f0-a2c1-05614fdebac7-0' usage_metadata={'input_tokens': 7847, 'output_tokens': 483, 'total_tokens': 8330, 'input_token_details': {'cache_read': 7675, 'cache_creation': 167, 'ephemeral_5m_input_tokens': 167, 'ephemeral_1h_input_tokens': 0}}"
        ]
      },
      "attempts": 1,
      "elapsed_time": 29.711647987365723
    },
    "tracking_id": null,
    "blocking_issues": [
      "400 Client Error: Bad Request for url: https://api.elliemae.com/oauth2/v1/token",
      "Mavent: 0 compliance issues",
      "ATR/QM: Red flags - []"
    ],
    "status": "blocked"
  }
}